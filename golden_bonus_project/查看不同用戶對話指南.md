# ğŸ“Š å¦‚ä½•åœ¨ Supabase æŸ¥çœ‹ä¸åŒç”¨æˆ¶çš„å°è©±

## ç•¶å‰è¨­è¨ˆèªªæ˜

### âœ… æ‰€æœ‰ç”¨æˆ¶çš„å°è©±éƒ½åœ¨åŒä¸€å€‹è¡¨ä¸­
- è¡¨åï¼š`conversations`
- ä½¿ç”¨ `session_id` ä¾†å€åˆ†ä¸åŒçš„æœƒè©±
- æ¯å€‹ç€è¦½å™¨æœƒè©±æœƒç”¢ç”Ÿä¸åŒçš„ `session_id`

### ğŸ” å¦‚ä½•å€åˆ†ä¸åŒç”¨æˆ¶

**æ–¹æ³• 1ï¼šæŒ‰ session_id ç¯©é¸ï¼ˆæœ€å¸¸ç”¨ï¼‰**

åœ¨ Supabase Dashboardï¼š
1. å‰å¾€ Table Editor > `conversations`
2. é»æ“Š Filter æŒ‰éˆ•
3. è¨­å®šï¼š
   - Column: `session_id`
   - Operator: `eq` (ç­‰æ–¼)
   - Value: `ä½ çš„ session_id`
4. é»æ“Š Apply

**æ–¹æ³• 2ï¼šä½¿ç”¨ SQL æŸ¥è©¢**

åœ¨ SQL Editor ä¸­åŸ·è¡Œï¼š
```sql
-- æŸ¥çœ‹ç‰¹å®šæœƒè©±çš„æ‰€æœ‰å°è©±
SELECT * FROM conversations 
WHERE session_id = 'demo_session_1766059426'
ORDER BY created_at;
```

**æ–¹æ³• 3ï¼šæŸ¥çœ‹æ‰€æœ‰ä¸åŒçš„æœƒè©±**

```sql
-- æŸ¥çœ‹æ‰€æœ‰æœƒè©±çš„çµ±è¨ˆï¼ˆæ¯å€‹æœƒè©±æœ‰å¤šå°‘æ¢è¨Šæ¯ï¼‰
SELECT 
    session_id,
    COUNT(*) as message_count,
    MIN(created_at) as first_message,
    MAX(created_at) as last_message
FROM conversations
GROUP BY session_id
ORDER BY last_message DESC;
```

## ğŸ“ å¯¦ç”¨æŸ¥è©¢ç¯„ä¾‹

æ‰€æœ‰æŸ¥è©¢ç¯„ä¾‹éƒ½åœ¨ `supabase_query_examples.sql` æ–‡ä»¶ä¸­ï¼ŒåŒ…æ‹¬ï¼š

1. âœ… æŸ¥çœ‹æ‰€æœ‰ä¸åŒçš„æœƒè©±çµ±è¨ˆ
2. âœ… æŸ¥çœ‹ç‰¹å®šæœƒè©±çš„æ‰€æœ‰å°è©±
3. âœ… æŸ¥çœ‹æœ€è¿‘çš„å°è©±ï¼ˆæ‰€æœ‰ç”¨æˆ¶ï¼‰
4. âœ… æŸ¥çœ‹æ´»èºæœƒè©±ï¼ˆæœ€è¿‘ 24 å°æ™‚ï¼‰
5. âœ… æŸ¥çœ‹ä»Šå¤©çš„å°è©±çµ±è¨ˆ
6. âœ… æŸ¥çœ‹æœ€æ´»èºçš„æœƒè©±
7. âœ… æœå°‹åŒ…å«ç‰¹å®šé—œéµå­—çš„å°è©±
8. âœ… æŸ¥çœ‹ç‰¹å®šæ™‚é–“ç¯„åœçš„å°è©±
9. âœ… æŸ¥çœ‹æ¯å€‹æœƒè©±çš„ç¬¬ä¸€æ¢å’Œæœ€å¾Œä¸€æ¢è¨Šæ¯
10. âœ… çµ±è¨ˆç¸½é«”æ•¸æ“š

## ğŸš€ æœªä¾†æ”¹é€²ï¼ˆå¯é¸ï¼‰

å¦‚æœéœ€è¦æ›´å¥½çš„ç”¨æˆ¶ç®¡ç†ï¼Œå¯ä»¥ï¼š
1. æ·»åŠ  `user_id` æ¬„ä½ï¼ˆå¦‚æœæœ‰ç™»å…¥ç³»çµ±ï¼‰
2. åŸ·è¡Œ `supabase_add_user_id.sql` ä¾†æ·»åŠ æ¬„ä½
3. ä¿®æ”¹ä»£ç¢¼ä¾†ä¿å­˜ `user_id`

è©³ç´°èªªæ˜è«‹åƒè€ƒ `å¤šç”¨æˆ¶å°è©±ç®¡ç†èªªæ˜.md`
